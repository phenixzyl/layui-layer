{"version":3,"file":"layer.js","sources":["../src/layer.js"],"sourcesContent":["/**\n * layer\n * 通用 Web 弹出层组件\n */\n\nimport jQuery from 'jquery';\nimport './css/layer.css';\n\"use strict\";\n\nvar isLayui = window.layui && layui.define;\nvar $;\nvar win;\nvar ready = {\n  getPath: function(){\n    var jsPath = document.currentScript ? document.currentScript.src : function(){\n      var js = document.scripts;\n      var last = js.length - 1;\n      var src;\n      for(var i = last; i > 0; i--){\n        if(js[i].readyState === 'interactive'){\n          src = js[i].src;\n          break;\n        }\n      }\n      return src || js[last].src;\n    }();\n    var GLOBAL = window.LAYUI_GLOBAL || {};\n    return GLOBAL.layer_dir || jsPath.substring(0, jsPath.lastIndexOf('/') + 1);\n  }(),\n  config: {\n    removeFocus: true\n  }, \n  end: {}, \n  events: {resize: {}}, \n  minStackIndex: 0,\n  minStackArr: [],\n  btn: ['&#x786E;&#x5B9A;', '&#x53D6;&#x6D88;'],\n\n  // 五种原始层模式\n  type: ['dialog', 'page', 'iframe', 'loading', 'tips'],\n  \n  // 获取节点的 style 属性值\n  getStyle: function(node, name){\n    var style = node.currentStyle ? node.currentStyle : window.getComputedStyle(node, null);\n    return style[style.getPropertyValue ? 'getPropertyValue' : 'getAttribute'](name);\n  },\n  \n  // 载入 CSS 依赖\n  link: function(href, fn, cssname){\n    // 未设置路径，则不主动加载 css\n    if(!layer.path) return;\n    \n    var head = document.getElementsByTagName(\"head\")[0];\n    var link = document.createElement('link');\n    \n    if(typeof fn === 'string') cssname = fn;\n    \n    var app = (cssname || href).replace(/\\.|\\//g, '');\n    var id = 'layuicss-'+ app;\n    var STATUS_NAME = 'creating'\n    var timeout = 0;\n    \n    link.rel = 'stylesheet';\n    link.href = layer.path + href;\n    link.id = id;\n    \n    if(!document.getElementById(id)){\n      head.appendChild(link);\n    }\n\n    if(typeof fn !== 'function') return;\n\n    // 轮询 css 是否加载完毕\n    (function poll(status) {\n      var delay = 100;\n      var getLinkElem = document.getElementById(id); // 获取动态插入的 link 元素\n      \n      // 如果轮询超过指定秒数，则视为请求文件失败或 css 文件不符合规范\n      if(++timeout > 10 * 1000 / delay){\n        return window.console && console.error(app +'.css: Invalid');\n      }\n      \n      // css 加载就绪\n      if(parseInt(ready.getStyle(getLinkElem, 'width')) === 1989){\n        // 如果参数来自于初始轮询（即未加载就绪时的），则移除 link 标签状态\n        if(status === STATUS_NAME) getLinkElem.removeAttribute('lay-status');\n        // 如果 link 标签的状态仍为「创建中」，则继续进入轮询，直到状态改变，则执行回调\n        getLinkElem.getAttribute('lay-status') === STATUS_NAME ? setTimeout(poll, delay) : fn();\n      } else {\n        getLinkElem.setAttribute('lay-status', STATUS_NAME);\n        setTimeout(function(){\n          poll(STATUS_NAME);\n        }, delay);\n      }\n\n      // parseInt(ready.getStyle(document.getElementById(id), 'width')) === 1989 ? fn() : setTimeout(poll, 1000);\n    }());\n\n  }\n};\n\n// 默认内置方法。\nexport var layer = {\n  v: '3.7.0',\n  ie: function(){ // ie 版本\n    var agent = navigator.userAgent.toLowerCase();\n    return (!!window.ActiveXObject || \"ActiveXObject\" in window) ? (\n      (agent.match(/msie\\s(\\d+)/) || [])[1] || '11' // 由于 ie11 并没有 msie 的标识\n    ) : false;\n  }(),\n  index: (window.layer && window.layer.v) ? 100000 : 0,\n  path: ready.getPath,\n  config: function(options, fn){\n    options = options || {};\n    layer.cache = ready.config = $.extend({}, ready.config, options);\n    layer.path = ready.config.path || layer.path;\n    typeof options.extend === 'string' && (options.extend = [options.extend]);\n    \n    // 如果设置了路径，则加载样式\n    if(ready.config.path) layer.ready();\n    \n    if(!options.extend) return this;\n    \n    // 加载 css\n    isLayui \n      ? layui.addcss('modules/layer/' + options.extend)\n    : ready.link('css/' + options.extend);\n    \n    return this;\n  },\n\n  // 主体 CSS 等待事件\n  ready: function(callback){\n    var cssname = 'layer';\n    var ver = '';\n    var path = (isLayui ? 'modules/' : 'css/') + 'layer.css?v='+ layer.v + ver;\n    \n    isLayui ? (\n      layui['layui.all'] \n        ? (typeof callback === 'function' && callback()) \n      : layui.addcss(path, callback, cssname)\n    ) : ready.link(path, callback, cssname);\n\n    return this;\n  },\n  \n  // 各种快捷引用\n  alert: function(content, options, yes){\n    var type = typeof options === 'function';\n    if(type) yes = options;\n    return layer.open($.extend({\n      content: content,\n      yes: yes\n    }, type ? {} : options));\n  }, \n  \n  confirm: function(content, options, yes, cancel){ \n    var type = typeof options === 'function';\n    if(type){\n      cancel = yes;\n      yes = options;\n    }\n    return layer.open($.extend({\n      content: content,\n      btn: ready.btn,\n      yes: yes,\n      btn2: cancel\n    }, type ? {} : options));\n  },\n  \n  msg: function(content, options, end){ // 最常用提示层\n    var type = typeof options === 'function', rskin = ready.config.skin;\n    var skin = (rskin ? rskin + ' ' + rskin + '-msg' : '')||'layui-layer-msg';\n    var anim = doms.anim.length - 1;\n    if(type) end = options;\n    return layer.open($.extend({\n      content: content,\n      time: 3000,\n      shade: false,\n      skin: skin,\n      title: false,\n      closeBtn: false,\n      btn: false,\n      resize: false,\n      end: end,\n      removeFocus: false\n    }, (type && !ready.config.skin) ? {\n      skin: skin + ' layui-layer-hui',\n      anim: anim\n    } : function(){\n       options = options || {};\n       if(options.icon === -1 || options.icon === undefined && !ready.config.skin){\n         options.skin = skin + ' ' + (options.skin||'layui-layer-hui');\n       }\n       return options;\n    }()));  \n  },\n  \n  load: function(icon, options){\n    return layer.open($.extend({\n      type: 3,\n      icon: icon || 0,\n      resize: false,\n      shade: 0.01,\n      removeFocus: false\n    }, options));\n  }, \n  \n  tips: function(content, follow, options){\n    return layer.open($.extend({\n      type: 4,\n      content: [content, follow],\n      closeBtn: false,\n      time: 3000,\n      shade: false,\n      resize: false,\n      fixed: false,\n      maxWidth: 260,\n      removeFocus: false\n    }, options));\n  }\n};\n\nvar Class = function(setings){  \n  var that = this, creat = function(){\n    that.creat();\n  };\n  that.index = ++layer.index;\n  that.config.maxWidth = $(win).width() - 15*2; // 初始最大宽度：当前屏幕宽，左右留 15px 边距\n  that.config = $.extend({}, that.config, ready.config, setings);\n  document.body ? creat() : setTimeout(function(){\n    creat();\n  }, 30);\n};\n\nClass.pt = Class.prototype;\n\n// 缓存常用字符\nvar doms = ['layui-layer', '.layui-layer-title', '.layui-layer-main', '.layui-layer-dialog', 'layui-layer-iframe', 'layui-layer-content', 'layui-layer-btn', 'layui-layer-close'];\n\n// 内置动画类\ndoms.anim = {\n  // 旧版动画\n  0: 'layer-anim-00', \n  1: 'layer-anim-01', \n  2: 'layer-anim-02', \n  3: 'layer-anim-03', \n  4: 'layer-anim-04', \n  5: 'layer-anim-05', \n  6: 'layer-anim-06',\n\n  // 滑出方向\n  slideDown: 'layer-anim-slide-down',\n  slideLeft: 'layer-anim-slide-left',\n  slideUp: 'layer-anim-slide-up',\n  slideRight: 'layer-anim-slide-right'\n};\n\ndoms.SHADE = 'layui-layer-shade';\ndoms.MOVE = 'layui-layer-move';\n\n// 默认配置\nClass.pt.config = {\n  type: 0,\n  shade: 0.3,\n  fixed: true,\n  move: doms[1],\n  title: '&#x4FE1;&#x606F;',\n  offset: 'auto',\n  area: 'auto',\n  closeBtn: 1,\n  icon: -1,\n  time: 0, // 0 表示不自动关闭\n  zIndex: 19891014, \n  maxWidth: 360,\n  anim: 0,\n  isOutAnim: true, // 退出动画\n  minStack: true, // 最小化堆叠\n  moveType: 1,\n  resize: true,\n  scrollbar: true, // 是否允许浏览器滚动条\n  tips: 2\n};\n\n// 容器\nClass.pt.vessel = function(conType, callback){\n  var that = this, times = that.index, config = that.config;\n  var zIndex = config.zIndex + times, titype = typeof config.title === 'object';\n  var ismax = config.maxmin && (config.type === 1 || config.type === 2);\n  var titleHTML = (config.title ? '<div class=\"layui-layer-title\" style=\"'+ (titype ? config.title[1] : '') +'\">' \n    + (titype ? config.title[0] : config.title) \n  + '</div>' : '');\n  \n  config.zIndex = zIndex;\n  callback([\n    // 遮罩\n    config.shade ? ('<div class=\"'+ doms.SHADE +'\" id=\"'+ doms.SHADE + times +'\" times=\"'+ times +'\" style=\"'+ ('z-index:'+ (zIndex-1) +'; ') +'\"></div>') : '',\n    \n    // 主体\n    '<div class=\"'+ doms[0] + (' layui-layer-'+ready.type[config.type]) + (((config.type == 0 || config.type == 2) && !config.shade) ? ' layui-layer-border' : '') + ' ' + (config.skin||'') +'\" id=\"'+ doms[0] + times +'\" type=\"'+ ready.type[config.type] +'\" times=\"'+ times +'\" showtime=\"'+ config.time +'\" conType=\"'+ (conType ? 'object' : 'string') +'\" style=\"z-index: '+ zIndex +'; width:'+ config.area[0] + ';height:' + config.area[1] + ';position:'+ (config.fixed ? 'fixed;' : 'absolute;') +'\">'\n      + (conType && config.type != 2 ? '' : titleHTML)\n\n      // 内容区\n      + '<div'+ (config.id ? ' id=\"'+ config.id +'\"' : '') +' class=\"layui-layer-content'+ ((config.type == 0 && config.icon !== -1) ? ' layui-layer-padding' : '') + (config.type == 3 ? ' layui-layer-loading'+config.icon : '') +'\">'\n        // 表情或图标\n        + function(){\n          var face = [\n            'layui-icon-tips',\n            'layui-icon-success',\n            'layui-icon-error',\n            'layui-icon-question',\n            'layui-icon-lock',\n            'layui-icon-face-cry',\n            'layui-icon-face-smile'\n          ];\n\n          var additFaceClass;\n\n          // 动画类\n          var animClass = 'layui-anim layui-anim-rotate layui-anim-loop';\n\n          // 信息框表情\n          if(config.type == 0 && config.icon !== -1){\n            // 加载（加载图标）\n            if(config.icon == 16){\n              additFaceClass = 'layui-icon layui-icon-loading '+ animClass;\n            }\n            return '<i class=\"layui-layer-face layui-icon '+ (\n              additFaceClass || face[config.icon] || face[0]\n            ) +'\"></i>';\n          }\n\n          // 加载层图标\n          if(config.type == 3){\n            var type = [\n              'layui-icon-loading', \n              'layui-icon-loading-1'\n            ];\n            // 风格 2\n            if(config.icon == 2){\n              return '<div class=\"layui-layer-loading-2 '+ animClass +'\"></div>';\n            }\n            return '<i class=\"layui-layer-loading-icon layui-icon '+ (\n              type[config.icon] || type[0]\n            )+' '+ animClass +'\"></i>'\n          }\n\n          return '';\n        }()\n        + (config.type == 1 && conType ? '' : (config.content||''))\n      + '</div>'\n\n      // 右上角按钮\n      + '<div class=\"layui-layer-setwin\">'+ function(){\n        var arr = [];\n\n        // 最小化、最大化\n        if(ismax){\n          arr.push('<span class=\"layui-layer-min\"></span>');\n          arr.push('<span class=\"layui-layer-max\"></span>');\n        }\n\n        // 关闭按钮\n        if(config.closeBtn){\n          arr.push('<span class=\"layui-icon layui-icon-close '+ [\n            doms[7], \n            doms[7] + (config.title ? config.closeBtn : (config.type == 4 ? '1' : '2'))\n          ].join(' ') +'\"></span>')\n        }\n\n        return arr.join('');\n      }() + '</div>'\n\n      // 底部按钮\n      + (config.btn ? function(){\n        var button = '';\n        typeof config.btn === 'string' && (config.btn = [config.btn]);\n        for(var i = 0, len = config.btn.length; i < len; i++){\n          button += '<a class=\"'+ doms[6] +''+ i +'\">'+ config.btn[i] +'</a>'\n        }\n        return '<div class=\"'+ function(){\n          var className = [doms[6]];\n          if(config.btnAlign) className.push(doms[6] + '-' + config.btnAlign);\n          return className.join(' ');\n        }() +'\">'+ button +'</div>'\n      }() : '')\n      + (config.resize ? '<span class=\"layui-layer-resize\"></span>' : '')\n    + '</div>'\n  ], titleHTML, $('<div class=\"'+ doms.MOVE +'\" id=\"'+ doms.MOVE +'\"></div>'));\n  return that;\n};\n\n// 创建骨架\nClass.pt.creat = function(){\n  var that = this;\n  var config = that.config;\n  var times = that.index, nodeIndex;\n  var content = config.content;\n  var conType = typeof content === 'object';\n  var body = $('body');\n  \n  // 若 id 对应的弹层已经存在，则不重新创建\n  if(config.id && $('.'+ doms[0]).find('#'+ config.id)[0]){\n    return (function(){\n      var layero = $('#'+ config.id).closest('.'+ doms[0]);\n      var index = layero.attr('times');\n      var options = layero.data('config');\n      var elemShade = $('#'+ doms.SHADE + index);\n      \n      var maxminStatus = layero.data('maxminStatus') || {};\n      // 若弹层为最小化状态，则点击目标元素时，自动还原\n      if(maxminStatus === 'min'){\n        layer.restore(index);\n      } else if(options.hideOnClose){\n        elemShade.show();\n        layero.show();\n      }\n    })();\n  }\n\n  // 是否移除活动元素的焦点\n  if(config.removeFocus) {\n    document.activeElement.blur(); // 将原始的聚焦节点失焦\n  }\n\n  // 初始化 area 属性\n  if(typeof config.area === 'string'){\n    config.area = config.area === 'auto' ? ['', ''] : [config.area, ''];\n  }\n  \n  // anim 兼容旧版 shift\n  if(config.shift){\n    config.anim = config.shift;\n  }\n  \n  if(layer.ie == 6){\n    config.fixed = false;\n  }\n  \n  switch(config.type){\n    case 0:\n      config.btn = ('btn' in config) ? config.btn : ready.btn[0];\n      layer.closeAll('dialog');\n    break;\n    case 2:\n      var content = config.content = conType ? config.content : [config.content||'', 'auto'];\n      config.content = '<iframe scrolling=\"'+ (config.content[1]||'auto') +'\" allowtransparency=\"true\" id=\"'+ doms[4] +''+ times +'\" name=\"'+ doms[4] +''+ times +'\" onload=\"this.className=\\'\\';\" class=\"layui-layer-load\" frameborder=\"0\" src=\"' + config.content[0] + '\"></iframe>';\n    break;\n    case 3:\n      delete config.title;\n      delete config.closeBtn;\n      config.icon === -1 && (config.icon === 0);\n      layer.closeAll('loading');\n    break;\n    case 4:\n      conType || (config.content = [config.content, 'body']);\n      config.follow = config.content[1];\n      config.content = config.content[0] + '<i class=\"layui-layer-TipsG\"></i>';\n      delete config.title;\n      config.tips = typeof config.tips === 'object' ? config.tips : [config.tips, true];\n      config.tipsMore || layer.closeAll('tips');\n    break;\n  }\n  \n  // 建立容器\n  that.vessel(conType, function(html, titleHTML, moveElem){\n    body.append(html[0]);\n    conType ? function(){\n      (config.type == 2 || config.type == 4) ? function(){\n        $('body').append(html[1]);\n      }() : function(){\n        if(!content.parents('.'+doms[0])[0]){\n          content.data('display', content.css('display')).show().addClass('layui-layer-wrap').wrap(html[1]);\n          $('#'+ doms[0] + times).find('.'+doms[5]).before(titleHTML);\n        }\n      }();\n    }() : body.append(html[1]);\n    $('#'+ doms.MOVE)[0] || body.append(ready.moveElem = moveElem);\n    \n    that.layero = $('#'+ doms[0] + times);\n    that.shadeo = $('#'+ doms.SHADE + times);\n    \n    config.scrollbar || ready.setScrollbar(times);\n  }).auto(times);\n  \n  // 遮罩\n  that.shadeo.css({\n    'background-color': config.shade[1] || '#000'\n    ,'opacity': config.shade[0] || config.shade\n  });\n\n  config.type == 2 && layer.ie == 6 && that.layero.find('iframe').attr('src', content[0]);\n\n  // 坐标自适应浏览器窗口尺寸\n  config.type == 4 ? that.tips() : function(){\n    that.offset()\n    // 首次弹出时，若 css 尚未加载，则等待 css 加载完毕后，重新设定尺寸\n    parseInt(ready.getStyle(document.getElementById(doms.MOVE), 'z-index')) ||  function(){\n      that.layero.css('visibility', 'hidden');\n      layer.ready(function(){\n        that.offset();\n        that.layero.css('visibility', 'visible');\n      });\n    }();\n  }();\n  \n  // 若是固定定位，则跟随 resize 事件来自适应坐标\n  if(config.fixed){\n    if(!ready.events.resize[that.index]){\n      ready.events.resize[that.index] = function(){\n        that.resize();\n      };\n      // 此处 resize 事件不会一直叠加，当关闭弹层时会移除该事件\n      win.on('resize', ready.events.resize[that.index]);\n    }\n  }\n  \n  config.time <= 0 || setTimeout(function(){\n    layer.close(that.index);\n  }, config.time);\n  that.move().callback();\n  \n  // 为兼容 jQuery3.0 的 css 动画影响元素尺寸计算\n  if(doms.anim[config.anim]){\n    var animClass = 'layer-anim '+ doms.anim[config.anim];\n    that.layero.addClass(animClass).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function(){\n      $(this).removeClass(animClass);\n    });\n  }\n  \n  // 记录配置信息\n  that.layero.data('config', config);\n};\n\n// 当前实例的 resize 事件\nClass.pt.resize = function(){\n  var that = this;\n  var config = that.config;\n  \n  that.offset();\n  (/^\\d+%$/.test(config.area[0]) || /^\\d+%$/.test(config.area[1])) && that.auto(that.index);\n  config.type == 4 && that.tips();\n};\n\n// 自适应\nClass.pt.auto = function(index){\n  var that = this, config = that.config, layero = $('#'+ doms[0] + index);\n  \n  if(config.area[0] === '' && config.maxWidth > 0){\n    // 适配 ie7\n    if(layer.ie && layer.ie < 8 && config.btn){\n      layero.width(layero.innerWidth());\n    }\n    layero.outerWidth() > config.maxWidth && layero.width(config.maxWidth);\n  }\n  \n  var area = [layero.innerWidth(), layero.innerHeight()];\n  var titHeight = layero.find(doms[1]).outerHeight() || 0;\n  var btnHeight = layero.find('.'+doms[6]).outerHeight() || 0;\n  var setHeight = function(elem){\n    elem = layero.find(elem);\n    elem.height(area[1] - titHeight - btnHeight - 2*(parseFloat(elem.css('padding-top'))|0));\n  };\n\n  switch(config.type){\n    case 2: \n      setHeight('iframe');\n    break;\n    default:\n      if(config.area[1] === ''){\n        if(config.maxHeight > 0 && layero.outerHeight() > config.maxHeight){\n          area[1] = config.maxHeight;\n          setHeight('.'+doms[5]);\n        } else if(config.fixed && area[1] >= win.height()){\n          area[1] = win.height();\n          setHeight('.'+doms[5]);\n        }\n      } else {\n        setHeight('.'+doms[5]);\n      }\n    break;\n  }\n  \n  return that;\n};\n\n// 计算坐标\nClass.pt.offset = function(){\n  var that = this, config = that.config, layero = that.layero;\n  var area = [layero.outerWidth(), layero.outerHeight()];\n  var type = typeof config.offset === 'object';\n  that.offsetTop = (win.height() - area[1])/2;\n  that.offsetLeft = (win.width() - area[0])/2;\n  \n  if(type){\n    that.offsetTop = config.offset[0];\n    that.offsetLeft = config.offset[1]||that.offsetLeft;\n  } else if(config.offset !== 'auto'){\n    \n    if(config.offset === 't'){ // 上\n      that.offsetTop = 0;\n    } else if(config.offset === 'r'){ // 右\n      that.offsetLeft = win.width() - area[0];\n    } else if(config.offset === 'b'){ // 下\n      that.offsetTop = win.height() - area[1];\n    } else if(config.offset === 'l'){ // 左\n      that.offsetLeft = 0;\n    } else if(config.offset === 'lt'){ // 左上\n      that.offsetTop = 0;\n      that.offsetLeft = 0;\n    } else if(config.offset === 'lb'){ // 左下\n      that.offsetTop = win.height() - area[1];\n      that.offsetLeft = 0;\n    } else if(config.offset === 'rt'){ // 右上\n      that.offsetTop = 0;\n      that.offsetLeft = win.width() - area[0];\n    } else if(config.offset === 'rb'){ // 右下\n      that.offsetTop = win.height() - area[1];\n      that.offsetLeft = win.width() - area[0];\n    } else {\n      that.offsetTop = config.offset;\n    }\n    \n  }\n \n  if(!config.fixed){\n    that.offsetTop = /%$/.test(that.offsetTop) ? \n      win.height()*parseFloat(that.offsetTop)/100\n    : parseFloat(that.offsetTop);\n    that.offsetLeft = /%$/.test(that.offsetLeft) ? \n      win.width()*parseFloat(that.offsetLeft)/100\n    : parseFloat(that.offsetLeft);\n    that.offsetTop += win.scrollTop();\n    that.offsetLeft += win.scrollLeft();\n  }\n  \n  // 最小化窗口时的自适应\n  if(layero.data('maxminStatus') === 'min'){\n    that.offsetTop = win.height() - (layero.find(doms[1]).outerHeight() || 0);\n    that.offsetLeft = layero.css('left');\n  }\n\n  // 设置坐标\n  layero.css({\n    top: that.offsetTop, \n    left: that.offsetLeft\n  });\n};\n\n// Tips\nClass.pt.tips = function(){\n  var that = this, config = that.config, layero = that.layero;\n  var layArea = [layero.outerWidth(), layero.outerHeight()], follow = $(config.follow);\n  if(!follow[0]) follow = $('body');\n  var goal = {\n    width: follow.outerWidth(),\n    height: follow.outerHeight(),\n    top: follow.offset().top,\n    left: follow.offset().left\n  }, tipsG = layero.find('.layui-layer-TipsG');\n  \n  var guide = config.tips[0];\n  config.tips[1] || tipsG.remove();\n  \n  goal.autoLeft = function(){\n    if(goal.left + layArea[0] - win.width() > 0){\n      goal.tipLeft = goal.left + goal.width - layArea[0];\n      tipsG.css({right: 12, left: 'auto'});\n    } else {\n      goal.tipLeft = goal.left;\n    }\n  };\n  \n  // 辨别 tips 的方位\n  // 21 为箭头大小 8*2 + 箭头相对父元素的top偏移 5\n  goal.where = [function(){ // 上        \n    goal.autoLeft();\n    goal.tipTop = goal.top - layArea[1] - 10;\n    tipsG.removeClass('layui-layer-TipsB').addClass('layui-layer-TipsT').css('border-right-color', config.tips[1]);\n  }, function(){ // 右\n    goal.tipLeft = goal.left + goal.width + 10;\n    goal.tipTop = goal.top - (goal.height * 0.75 < 21 ? 21 - goal.height * 0.5 : 0);\n    goal.tipTop = Math.max(goal.tipTop, 0);\n    tipsG.removeClass('layui-layer-TipsL').addClass('layui-layer-TipsR').css('border-bottom-color', config.tips[1]); \n  }, function(){ // 下\n    goal.autoLeft();\n    goal.tipTop = goal.top + goal.height + 10;\n    tipsG.removeClass('layui-layer-TipsT').addClass('layui-layer-TipsB').css('border-right-color', config.tips[1]);\n  }, function(){ // 左\n    goal.tipLeft = goal.left - layArea[0] - 10;\n    goal.tipTop = goal.top - (goal.height * 0.75 < 21 ? 21 - goal.height * 0.5 : 0);\n    goal.tipTop = Math.max(goal.tipTop, 0);\n    tipsG.removeClass('layui-layer-TipsR').addClass('layui-layer-TipsL').css('border-bottom-color', config.tips[1]);\n  }];\n  goal.where[guide-1]();\n  \n  /* 8*2为小三角形占据的空间 */\n  if(guide === 1){\n    goal.top - (win.scrollTop() + layArea[1] + 8*2) < 0 && goal.where[2]();\n  } else if(guide === 2){\n    win.width() - (goal.left + goal.width + layArea[0] + 8*2) > 0 || goal.where[3]()\n  } else if(guide === 3){\n    (goal.top - win.scrollTop() + goal.height + layArea[1] + 8*2) - win.height() > 0 && goal.where[0]();\n  } else if(guide === 4){\n     layArea[0] + 8*2 - goal.left > 0 && goal.where[1]()\n  }\n\n  layero.find('.'+doms[5]).css({\n    'background-color': config.tips[1], \n    'padding-right': (config.closeBtn ? '30px' : '')\n  });\n  layero.css({\n    left: goal.tipLeft - (config.fixed ? win.scrollLeft() : 0), \n    top: goal.tipTop  - (config.fixed ? win.scrollTop() : 0)\n  });\n}\n\n// 拖拽层\nClass.pt.move = function(){\n  var that = this;\n  var config = that.config;\n  var _DOC = $(document);\n  var layero = that.layero;\n  var DATA_NAME = ['LAY_MOVE_DICT', 'LAY_RESIZE_DICT'];\n  var moveElem = layero.find(config.move);\n  var resizeElem = layero.find('.layui-layer-resize');\n  \n  // 给指定元素添加拖动光标\n  if(config.move) moveElem.css('cursor', 'move');\n  \n  // 按下拖动元素\n  moveElem.on('mousedown', function(e){\n    if (e.button) {return;} // 不是左键不处理\n    var othis = $(this);\n    var dict = {};\n    \n    if(config.move){\n      dict.layero = layero;\n      dict.config = config;\n      dict.offset = [\n        e.clientX - parseFloat(layero.css('left')),\n        e.clientY - parseFloat(layero.css('top'))\n      ];\n      \n      othis.data(DATA_NAME[0], dict);\n      ready.eventMoveElem = othis;\n      ready.moveElem.css('cursor', 'move').show();\n    }\n    \n    e.preventDefault();\n  });\n  \n  // 按下右下角拉伸\n  resizeElem.on('mousedown', function(e){\n    var othis = $(this);\n    var dict = {};\n    \n    if(config.resize){\n      dict.layero = layero;\n      dict.config = config;\n      dict.offset = [e.clientX, e.clientY];\n      dict.index = that.index;\n      dict.area = [\n        layero.outerWidth()\n        ,layero.outerHeight()\n      ];\n      \n      othis.data(DATA_NAME[1], dict);\n      ready.eventResizeElem = othis;\n      ready.moveElem.css('cursor', 'se-resize').show();\n    }\n    \n    e.preventDefault();\n  });\n  \n  // 拖动元素，避免多次调用实例造成事件叠加\n  if(ready.docEvent) return that;\n  _DOC.on('mousemove', function(e){\n    // 拖拽移动\n    if(ready.eventMoveElem){\n      var dict = ready.eventMoveElem.data(DATA_NAME[0]) || {}\n      ,layero = dict.layero\n      ,config = dict.config;\n      \n      var X = e.clientX - dict.offset[0];\n      var Y = e.clientY - dict.offset[1];\n      var fixed = layero.css('position') === 'fixed';\n      \n      e.preventDefault();\n      \n      dict.stX = fixed ? 0 : win.scrollLeft();\n      dict.stY = fixed ? 0 : win.scrollTop();\n\n      // 控制元素不被拖出窗口外\n      if(!config.moveOut){\n        var setRig = win.width() - layero.outerWidth() + dict.stX;\n        var setBot = win.height() - layero.outerHeight() + dict.stY;  \n        X < dict.stX && (X = dict.stX);\n        X > setRig && (X = setRig); \n        Y < dict.stY && (Y = dict.stY);\n        Y > setBot && (Y = setBot);\n      }\n      \n      // 拖动时跟随鼠标位置\n      layero.css({\n        left: X,\n        top: Y\n      });\n    }\n    \n    // Resize\n    if(ready.eventResizeElem){\n      var dict = ready.eventResizeElem.data(DATA_NAME[1]) || {};\n      var config = dict.config;\n      \n      var X = e.clientX - dict.offset[0];\n      var Y = e.clientY - dict.offset[1];\n      \n      e.preventDefault();\n      \n      // 拉伸宽高\n      layer.style(dict.index, {\n        width: dict.area[0] + X\n        ,height: dict.area[1] + Y\n      });\n      \n      config.resizing && config.resizing(dict.layero);\n    }\n  }).on('mouseup', function(e){\n    if(ready.eventMoveElem){\n      var dict = ready.eventMoveElem.data(DATA_NAME[0]) || {};\n      var config = dict.config;\n      \n      ready.eventMoveElem.removeData(DATA_NAME[0]);\n      delete ready.eventMoveElem;\n      ready.moveElem.hide();\n      config.moveEnd && config.moveEnd(dict.layero);\n    }\n    if(ready.eventResizeElem){\n      ready.eventResizeElem.removeData(DATA_NAME[1]);\n      delete ready.eventResizeElem;\n      ready.moveElem.hide();\n    }\n  });\n  \n  ready.docEvent = true; // 已给 document 执行全局事件\n  return that;\n};\n\nClass.pt.callback = function(){\n  var that = this, layero = that.layero, config = that.config;\n  that.openLayer();\n  if(config.success){\n    if(config.type == 2){\n      layero.find('iframe').on('load', function(){\n        config.success(layero, that.index, that);\n      });\n    } else {\n      config.success(layero, that.index, that);\n    }\n  }\n  layer.ie == 6 && that.IE6(layero);\n  \n  // 按钮\n  layero.find('.'+ doms[6]).children('a').on('click', function(){\n    var index = $(this).index();\n    if(index === 0){\n      if(config.yes){\n        config.yes(that.index, layero, that);\n      } else if(config['btn1']){\n        config['btn1'](that.index, layero, that);\n      } else {\n        layer.close(that.index);\n      }\n    } else {\n      var close = config['btn'+(index+1)] && config['btn'+(index+1)](that.index, layero, that);\n      close === false || layer.close(that.index);\n    }\n  });\n  \n  // 取消\n  function cancel(){\n    var close = config.cancel && config.cancel(that.index, layero, that);\n    close === false || layer.close(that.index);\n  }\n  \n  // 右上角关闭回调\n  layero.find('.'+ doms[7]).on('click', cancel);\n  \n  // 点遮罩关闭\n  if(config.shadeClose){\n    that.shadeo.on('click', function(){\n      layer.close(that.index);\n    });\n  } \n  \n  // 最小化\n  layero.find('.layui-layer-min').on('click', function(){\n    var min = config.min && config.min(layero, that.index, that);\n    min === false || layer.min(that.index, config);\n  });\n  \n  // 全屏/还原\n  layero.find('.layui-layer-max').on('click', function(){\n    if($(this).hasClass('layui-layer-maxmin')){\n      layer.restore(that.index);\n      config.restore && config.restore(layero, that.index, that);\n    } else {\n      layer.full(that.index, config);\n      setTimeout(function(){\n        config.full && config.full(layero, that.index, that);\n      }, 100);\n    }\n  });\n\n  config.end && (ready.end[that.index] = config.end);\n};\n\n// for ie6 恢复 select\nready.reselect = function(){\n  $.each($('select'), function(index , value){\n    var sthis = $(this);\n    if(!sthis.parents('.'+doms[0])[0]){\n      (sthis.attr('layer') == 1 && $('.'+doms[0]).length < 1) && sthis.removeAttr('layer').show(); \n    }\n    sthis = null;\n  });\n}; \n\nClass.pt.IE6 = function(layero){\n  // 隐藏select\n  $('select').each(function(index , value){\n    var sthis = $(this);\n    if(!sthis.parents('.'+doms[0])[0]){\n      sthis.css('display') === 'none' || sthis.attr({'layer' : '1'}).hide();\n    }\n    sthis = null;\n  });\n};\n\n// 需依赖原型的对外方法\nClass.pt.openLayer = function(){\n  var that = this;\n  \n  // 置顶当前窗口\n  layer.zIndex = that.config.zIndex;\n  layer.setTop = function(layero){\n    var setZindex = function(){\n      layer.zIndex++;\n      layero.css('z-index', layer.zIndex + 1);\n    };\n    layer.zIndex = parseInt(layero[0].style.zIndex);\n    layero.on('mousedown', setZindex);\n    return layer.zIndex;\n  };\n};\n\n// 记录宽高坐标，用于还原\nready.record = function(layero){\n  if(!layero[0]) return window.console && console.error('index error');\n  var area = [\n    layero[0].style.width || layero.width(),\n    layero[0].style.height || layero.height(),\n    layero.position().top, \n    layero.position().left + parseFloat(layero.css('margin-left'))\n  ];\n  layero.find('.layui-layer-max').addClass('layui-layer-maxmin');\n  layero.attr({area: area});\n};\n\n// 设置页面滚动条\nready.setScrollbar = function(index){\n  doms.html.css('overflow', 'hidden').attr('layer-full', index);\n};\n\n// 恢复页面滚动条\nready.restScrollbar = function(index){\n  if(doms.html.attr('layer-full') == index){\n    doms.html[0].style[doms.html[0].style.removeProperty \n      ? 'removeProperty' \n    : 'removeAttribute']('overflow');\n    doms.html.removeAttr('layer-full');\n  }\n};\n\n/** 内置成员 */\n\nwindow.layer = layer;\n\n// 获取子 iframe 的 DOM\nlayer.getChildFrame = function(selector, index){\n  index = index || $('.'+doms[4]).attr('times');\n  return $('#'+ doms[0] + index).find('iframe').contents().find(selector);  \n};\n\n// 得到当前 iframe 层的索引，子 iframe 时使用\nlayer.getFrameIndex = function(name){\n  return $('#'+ name).parents('.'+doms[4]).attr('times');\n};\n\n// iframe 层自适应宽高\nlayer.iframeAuto = function(index){\n  if(!index) return;\n  var heg = layer.getChildFrame('html', index).outerHeight();\n  var layero = $('#'+ doms[0] + index);\n  var titHeight = layero.find(doms[1]).outerHeight() || 0;\n  var btnHeight = layero.find('.'+doms[6]).outerHeight() || 0;\n  layero.css({height: heg + titHeight + btnHeight});\n  layero.find('iframe').css({height: heg});\n};\n\n// 重置 iframe url\nlayer.iframeSrc = function(index, url){\n  $('#'+ doms[0] + index).find('iframe').attr('src', url);\n};\n\n// 设定层的样式\nlayer.style = function(index, options, limit){\n  var layero = $('#'+ doms[0] + index);\n  var contElem = layero.find('.layui-layer-content');\n  var type = layero.attr('type');\n  var titHeight = layero.find(doms[1]).outerHeight() || 0;\n  var btnHeight = layero.find('.'+doms[6]).outerHeight() || 0;\n  var minLeft = layero.attr('minLeft');\n  \n  // loading 和 tips 层不允许更改\n  if(type === ready.type[3] || type === ready.type[4]){\n    return;\n  }\n  \n  if(!limit){\n    if(parseFloat(options.width) <= 260){\n      options.width = 260;\n    }\n    \n    if(parseFloat(options.height) - titHeight - btnHeight <= 64){\n      options.height = 64 + titHeight + btnHeight;\n    }\n  }\n  layero.css(options);\n  btnHeight = layero.find('.'+doms[6]).outerHeight() || 0;\n  \n  if(type === ready.type[2]){\n    layero.find('iframe').css({\n      height: (typeof options.height === 'number' ? options.height : layero.height()) - titHeight - btnHeight\n    });\n  } else {\n    contElem.css({\n      height: (typeof options.height === 'number' ? options.height : layero.height()) - titHeight - btnHeight\n      - parseFloat(contElem.css('padding-top'))\n      - parseFloat(contElem.css('padding-bottom'))\n    })\n  }\n};\n\n// 最小化\nlayer.min = function(index, options){\n  var layero = $('#'+ doms[0] + index);\n  var maxminStatus = layero.data('maxminStatus');\n\n  if(maxminStatus === 'min') return; // 当前的状态是否已经是最小化\n  if(maxminStatus === 'max') layer.restore(index); // 若当前为最大化，则先还原后再最小化\n\n  layero.data('maxminStatus', 'min');\n  options = options || layero.data('config') || {};\n\n  var shadeo = $('#'+ doms.SHADE + index);\n  var elemMin = layero.find('.layui-layer-min');\n  var titHeight = layero.find(doms[1]).outerHeight() || 0;\n  var minLeft = layero.attr('minLeft'); // 最小化时的横坐标\n  var hasMinLeft = typeof minLeft === 'string'; // 是否已经赋值过最小化坐标\n  var left = hasMinLeft ? minLeft : (181*ready.minStackIndex)+'px';\n  var position = layero.css('position');\n  var minWidth = 180; // 最小化时的宽度\n  var settings = {\n    width: minWidth\n    ,height: titHeight\n    ,position: 'fixed'\n    ,overflow: 'hidden'\n  };\n\n  ready.record(layero);  // 记录当前尺寸、坐标，用于还原\n\n  // 简易最小化补位\n  if(ready.minStackArr.length > 0){\n    left = ready.minStackArr[0];\n    ready.minStackArr.shift();\n  }\n\n  // left 是否超出边界\n  if(parseFloat(left) + minWidth  > win.width()){\n    left = win.width() - minWidth - function(){\n      ready.minStackArr.edgeIndex = ready.minStackArr.edgeIndex || 0;\n      return ready.minStackArr.edgeIndex += 3;\n    }();\n    if(left < 0) left = 0;\n  }\n  \n  // 是否堆叠在左下角\n  if(options.minStack){\n    settings.left = left;\n    settings.top = win.height() - titHeight;\n    hasMinLeft || ready.minStackIndex++; // 若未赋值过最小化坐标，则最小化操作索引自增\n    layero.attr('minLeft', left);\n  }\n  \n  layero.attr('position', position);\n  layer.style(index, settings, true);\n\n  elemMin.hide();\n  layero.attr('type') === 'page' && layero.find(doms[4]).hide();\n  ready.restScrollbar(index);\n\n  // 隐藏遮罩\n  shadeo.hide();\n};\n\n// 还原\nlayer.restore = function(index){\n  var layero = $('#'+ doms[0] + index);\n  var shadeo = $('#'+ doms.SHADE + index);\n  var area = layero.attr('area').split(',');\n  var type = layero.attr('type');\n  var options = layero.data('config') || {};\n\n  layero.removeData('maxminStatus'); // 移除最大最小状态\n  \n  // 恢复原来尺寸\n  layer.style(index, {\n    width: area[0], // 数值或百分比\n    height: area[1],\n    top: parseFloat(area[2]),\n    left: parseFloat(area[3]),\n    position: layero.attr('position'),\n    overflow: 'visible'\n  }, true);\n  \n  layero.find('.layui-layer-max').removeClass('layui-layer-maxmin');\n  layero.find('.layui-layer-min').show();\n  type === 'page' && layero.find(doms[4]).show();\n\n  // 恢复页面滚动条弹层打开时的状态\n  options.scrollbar ? ready.restScrollbar(index) : ready.setScrollbar(index);\n  \n  // 恢复遮罩\n  shadeo.show();\n  // ready.events.resize[index](); // ?\n};\n\n// 全屏（最大化）\nlayer.full = function(index){\n  var layero = $('#'+ doms[0] + index);\n  var maxminStatus = layero.data('maxminStatus');\n\n  if(maxminStatus === 'max') return // 检查当前的状态是否已经是最大化\n  if(maxminStatus === 'min') layer.restore(index); // 若当前为最小化，则先还原后再最大化\n\n  layero.data('maxminStatus', 'max');\n  ready.record(layero); // 记录当前尺寸、坐标\n\n  if(!doms.html.attr('layer-full')){\n    ready.setScrollbar(index);\n  }\n\n  setTimeout(function(){\n    var isfix = layero.css('position') === 'fixed';\n    layer.style(index, {\n      top: isfix ? 0 : win.scrollTop(),\n      left: isfix ? 0 : win.scrollLeft(),\n      width: '100%',\n      height: '100%'\n    }, true);\n    layero.find('.layui-layer-min').hide();\n  }, 100);\n};\n\n// 改变 title\nlayer.title = function(name, index){\n  var title = $('#'+ doms[0] + (index || layer.index)).find(doms[1]);\n  title.html(name);\n};\n\n// 关闭 layer 总方法\nlayer.close = function(index, callback){\n  var layero = function(){\n    var closest = $('.'+ doms[0]).children('#'+ index).closest('.'+ doms[0]);\n    return closest[0] ? (\n      index = closest.attr('times'),\n      closest\n    ) : $('#'+ doms[0] + index)\n  }();\n  var type = layero.attr('type');\n  var options = layero.data('config') || {};\n  var hideOnClose = options.id && options.hideOnClose; // 是否关闭时移除弹层容器\n\n  if(!layero[0]) return;\n\n  // 关闭动画\n  var closeAnim = ({\n    slideDown: 'layer-anim-slide-down-out',\n    slideLeft: 'layer-anim-slide-left-out',\n    slideUp: 'layer-anim-slide-up-out',\n    slideRight: 'layer-anim-slide-right-out'\n  })[options.anim] || 'layer-anim-close';\n\n  // 移除主容器\n  var remove = function(){\n    var WRAP = 'layui-layer-wrap';\n\n    // 是否关闭时隐藏弹层容器\n    if(hideOnClose){\n      layero.removeClass('layer-anim '+ closeAnim);\n      return layero.hide();\n    }\n\n    // 是否为页面捕获层\n    if(type === ready.type[1] && layero.attr('conType') === 'object'){\n      layero.children(':not(.'+ doms[5] +')').remove();\n      var wrap = layero.find('.'+WRAP);\n      for(var i = 0; i < 2; i++){\n        wrap.unwrap();\n      }\n      wrap.css('display', wrap.data('display')).removeClass(WRAP);\n    } else {\n      // 低版本 IE 回收 iframe\n      if(type === ready.type[2]){\n        try {\n          var iframe = $('#'+ doms[4] + index)[0];\n          iframe.contentWindow.document.write('');\n          iframe.contentWindow.close();\n          layero.find('.'+doms[5])[0].removeChild(iframe);\n        } catch(e){}\n      }\n      layero[0].innerHTML = '';\n      layero.remove();\n    }\n\n    typeof ready.end[index] === 'function' && ready.end[index]();\n    delete ready.end[index];\n    typeof callback === 'function' && callback();\n\n    // 移除 reisze 事件\n    if(ready.events.resize[index]){\n      win.off('resize', ready.events.resize[index]);\n      delete ready.events.resize[index];\n    }\n  };\n  // 移除遮罩\n  var removeShade = (function fn(){\n    $('#'+ doms.SHADE + index)[\n      hideOnClose ? 'hide' : 'remove'\n    ]();\n  })();\n  \n  // 是否允许关闭动画\n  if(options.isOutAnim){\n    layero.addClass('layer-anim '+ closeAnim);\n  }\n  \n  layer.ie == 6 && ready.reselect();\n  ready.restScrollbar(index); \n  \n  // 记住被关闭层的最小化堆叠坐标\n  if(typeof layero.attr('minLeft') === 'string'){\n    ready.minStackIndex--;\n    ready.minStackArr.push(layero.attr('minLeft'));\n  }\n  \n  if((layer.ie && layer.ie < 10) || !options.isOutAnim){\n    remove()\n  } else {\n    setTimeout(function(){\n      remove();\n    }, 200);\n  }\n};\n\n// 关闭所有层\nlayer.closeAll = function(type, callback){\n  if(typeof type === 'function'){\n    callback = type;\n    type = null;\n  }\n  var domsElem = $('.'+doms[0]);\n  $.each(domsElem, function(_index){\n    var othis = $(this);\n    var is = type ? (othis.attr('type') === type) : 1;\n    is && layer.close(othis.attr('times'), _index === domsElem.length - 1 ? callback : null);\n    is = null;\n  });\n  if(domsElem.length === 0) typeof callback === 'function' && callback();\n};\n\n// 根据弹层类型关闭最近打开的层\nlayer.closeLast = function(type, callback){\n  type = type || 'page';\n  layer.close($('.layui-layer-'+ type +':last').attr(\"times\"), callback);\n};\n\n\n/*\n * 拓展模块，layui 开始合并在一起\n */\n\n\nvar cache = layer.cache || {};\nvar skin = function(type){\n  return (cache.skin ? (' ' + cache.skin + ' ' + cache.skin + '-'+type) : '');\n}; \n \n// 仿系统 prompt\nlayer.prompt = function(options, yes){\n  var style = '', placeholder = '';\n  options = options || {};\n  \n  if(typeof options === 'function') yes = options;\n  \n  if(options.area){\n    var area = options.area;\n    style = 'style=\"width: '+ area[0] +'; height: '+ area[1] + ';\"';\n    delete options.area;\n  }\n  if (options.placeholder) {\n    placeholder = ' placeholder=\"' + options.placeholder + '\"';\n  }\n  var prompt, content = options.formType == 2 ? '<textarea class=\"layui-layer-input\"' + style + placeholder + '></textarea>' : function () {\n    return '<input type=\"' + (options.formType == 1 ? 'password' : 'text') + '\" class=\"layui-layer-input\"' + placeholder + '>';\n  }();\n  \n  var success = options.success;\n  delete options.success;\n  \n  return layer.open($.extend({\n    type: 1,\n    btn: ['&#x786E;&#x5B9A;','&#x53D6;&#x6D88;'],\n    content: content,\n    skin: 'layui-layer-prompt' + skin('prompt'),\n    maxWidth: win.width(),\n    success: function(layero){\n      prompt = layero.find('.layui-layer-input');\n      prompt.val(options.value || '').focus();\n      typeof success === 'function' && success(layero);\n    },\n    resize: false,\n    yes: function(index){\n      var value = prompt.val();\n      if(value.length > (options.maxlength||500)) {\n        layer.tips('&#x6700;&#x591A;&#x8F93;&#x5165;'+ (options.maxlength || 500) +'&#x4E2A;&#x5B57;&#x6570;', prompt, {tips: 1});\n      } else {\n        yes && yes(value, index, prompt);\n      }\n    }\n  }, options));\n};\n\n// tab 层\nlayer.tab = function(options){\n  options = options || {};\n  \n  var tab = options.tab || {};\n  var THIS = 'layui-this';\n  var success = options.success;\n  \n  delete options.success;\n  \n  return layer.open($.extend({\n    type: 1,\n    skin: 'layui-layer-tab' + skin('tab'),\n    resize: false,\n    title: function(){\n      var len = tab.length, ii = 1, str = '';\n      if(len > 0){\n        str = '<span class=\"'+ THIS +'\">'+ tab[0].title +'</span>';\n        for(; ii < len; ii++){\n          str += '<span>'+ tab[ii].title +'</span>';\n        }\n      }\n      return str;\n    }(),\n    content: '<ul class=\"layui-layer-tabmain\">'+ function(){\n      var len = tab.length, ii = 1, str = '';\n      if(len > 0){\n        str = '<li class=\"layui-layer-tabli '+ THIS +'\">'+ (tab[0].content || 'no content') +'</li>';\n        for(; ii < len; ii++){\n          str += '<li class=\"layui-layer-tabli\">'+ (tab[ii].content || 'no  content') +'</li>';\n        }\n      }\n      return str;\n    }() +'</ul>',\n    success: function(layero){\n      var btn = layero.find('.layui-layer-title').children();\n      var main = layero.find('.layui-layer-tabmain').children();\n      btn.on('mousedown', function(e){\n        e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;\n        var othis = $(this), index = othis.index();\n        othis.addClass(THIS).siblings().removeClass(THIS);\n        main.eq(index).show().siblings().hide();\n        typeof options.change === 'function' && options.change(index);\n      });\n      typeof success === 'function' && success(layero);\n    }\n  }, options));\n};\n\n// 图片层\nlayer.photos = function(options, loop, key){\n  var dict = {};\n\n  // 默认属性\n  options = $.extend(true, {\n    toolbar: true,\n    footer: true\n  }, options);\n\n  if(!options.photos) return;\n  \n  // 若 photos 并非选择器或 jQuery 对象，则为普通 object\n  var isObject = !(typeof options.photos === 'string' || options.photos instanceof $);\n  var photos = isObject ? options.photos : {};\n  var data = photos.data || [];\n  var start = photos.start || 0;\n  var success = options.success;\n  \n  dict.imgIndex = (start|0) + 1;\n  options.img = options.img || 'img';\n  delete options.success;\n  \n  // 若 options.photos 不是一个对象\n  if(!isObject){ // 页面直接获取\n    var parent = $(options.photos), pushData = function(){\n      data = [];\n      parent.find(options.img).each(function(index){\n        var othis = $(this);\n        othis.attr('layer-index', index);\n        data.push({\n          alt: othis.attr('alt'),\n          pid: othis.attr('layer-pid'),\n          src: othis.attr('lay-src') || othis.attr('layer-src') || othis.attr('src'),\n          thumb: othis.attr('src')\n        });\n      });\n    };\n    \n    pushData();\n    \n    if (data.length === 0) return;\n    \n    loop || parent.on('click', options.img, function(){\n      pushData();\n      var othis = $(this), index = othis.attr('layer-index'); \n      layer.photos($.extend(options, {\n        photos: {\n          start: index,\n          data: data,\n          tab: options.tab\n        },\n        full: options.full\n      }), true);\n    });\n    \n    // 不直接弹出\n    if (!loop) return;\n  } else if (data.length === 0){\n    return layer.msg('&#x6CA1;&#x6709;&#x56FE;&#x7247;');\n  }\n  \n  // 上一张\n  dict.imgprev = function(key){\n    dict.imgIndex--;\n    if(dict.imgIndex < 1){\n      dict.imgIndex = data.length;\n    }\n    dict.tabimg(key);\n  };\n  \n  // 下一张\n  dict.imgnext = function(key,errorMsg){\n    dict.imgIndex++;\n    if(dict.imgIndex > data.length){\n      dict.imgIndex = 1;\n      if (errorMsg) {return}\n    }\n    dict.tabimg(key)\n  };\n  \n  // 方向键\n  dict.keyup = function(event){\n    if(!dict.end){\n      var code = event.keyCode;\n      event.preventDefault();\n      if(code === 37){\n        dict.imgprev(true);\n      } else if(code === 39) {\n        dict.imgnext(true);\n      } else if(code === 27) {\n        layer.close(dict.index);\n      }\n    }\n  }\n  \n  // 切换\n  dict.tabimg = function(key){\n    if(data.length <= 1) return;\n    photos.start = dict.imgIndex - 1;\n    layer.close(dict.index);\n    return layer.photos(options, true, key);\n  }\n\n  dict.isNumber = function (n) {\n    return typeof n === 'number' && !isNaN(n);\n  }\n\n  dict.image = {};\n\n  dict.getTransform = function(opts){\n    var transforms = [];\n    var rotate = opts.rotate;\n    var scaleX = opts.scaleX;\n    var scale = opts.scale;\n\n    if (dict.isNumber(rotate) && rotate !== 0) {\n      transforms.push('rotate(' + rotate + 'deg)');\n    }\n\n    if (dict.isNumber(scaleX) && scaleX !== 1) {\n      transforms.push('scaleX(' + scaleX + ')');\n    }\n\n    if (dict.isNumber(scale)) {\n      transforms.push('scale(' + scale + ')');\n    }\n\n    return transforms.length ? transforms.join(' ') : 'none';\n  }\n  \n  // 一些动作\n  dict.event = function(layero, index, that){\n    // 上一张\n    dict.main.find('.layui-layer-photos-prev').on('click', function(event){\n      event.preventDefault();\n      dict.imgprev(true);\n    });  \n    \n    // 下一张\n    dict.main.find('.layui-layer-photos-next').on('click', function(event){\n      event.preventDefault();\n      dict.imgnext(true);\n    });\n    \n    $(document).on('keyup', dict.keyup);\n\n    // 头部工具栏事件\n    layero.off('click').on('click','*[toolbar-event]', function () {\n      var othis = $(this);\n      var event = othis.attr('toolbar-event');\n      switch (event) {\n        case 'rotate':\n          dict.image.rotate = ((dict.image.rotate || 0) + Number(othis.attr('data-option'))) % 360;\n          dict.imgElem.css({\n            transform: dict.getTransform(dict.image)\n          });\n          break;\n        case 'scalex':\n          dict.image.scaleX = dict.image.scaleX === -1 ? 1 : -1;\n          dict.imgElem.css({\n            transform: dict.getTransform(dict.image)\n          });\n          break;\n        case 'zoom':\n          var ratio = Number(othis.attr('data-option'));\n          dict.image.scale = (dict.image.scale || 1) + ratio;\n          // 缩小状态最小值\n          if (ratio < 0 && dict.image.scale < 0 - ratio) {\n            dict.image.scale = 0 - ratio;\n          }\n          dict.imgElem.css({\n            transform: dict.getTransform(dict.image)\n          });\n          break;\n        case 'reset':\n          dict.image.scaleX = 1;\n          dict.image.scale = 1;\n          dict.image.rotate = 0;\n          dict.imgElem.css({\n            transform: 'none'\n          });\n          break;\n        case 'close':\n          layer.close(index);\n          break;\n      }\n      that.offset();\n      that.auto(index);\n    });\n    \n    // 鼠标滚轮缩放图片事件\n    dict.main.on('mousewheel DOMMouseScroll', function(e) {\n      var delta = e.originalEvent.wheelDelta || -e.originalEvent.detail;\n      var zoomElem = dict.main.find('[toolbar-event=\"zoom\"]');\n      if (delta > 0) {\n        zoomElem.eq(0).trigger('click');\n      } else {\n        zoomElem.eq(1).trigger('click');\n      }\n      e.preventDefault();\n    });\n\n  };\n  \n  // 图片预加载\n  function loadImage(url, callback, error) {   \n    var img = new Image();\n    img.src = url; \n    if(img.complete){\n      return callback(img);\n    }\n    img.onload = function(){\n      img.onload = null;\n      callback(img);\n    };\n    img.onerror = function(e){\n      img.onerror = null;\n      error(e);\n    };  \n  }\n  \n  dict.loadi = layer.load(1, {\n    shade: 'shade' in options ? false : 0.9,\n    scrollbar: false\n  });\n\n  loadImage(data[start].src, function(img){\n    layer.close(dict.loadi);\n    \n    var alt = data[start].alt || '';\n\n    // 切换图片时不出现动画\n    if(key) options.anim = -1;\n    \n    // 弹出图片层\n    dict.index = layer.open($.extend({\n      type: 1,\n      id: 'layui-layer-photos',\n      area: function(){\n        var imgarea = [img.width, img.height];\n        var winarea = [$(window).width() - 100, $(window).height() - 100];\n        \n        // 若实际图片的宽或者高比 屏幕大（那么进行缩放）\n        if(!options.full && (imgarea[0]>winarea[0]||imgarea[1]>winarea[1])){\n          var wh = [imgarea[0]/winarea[0],imgarea[1]/winarea[1]];// 取宽度缩放比例、高度缩放比例\n          if(wh[0] > wh[1]){// 取缩放比例最大的进行缩放\n            imgarea[0] = imgarea[0]/wh[0];\n            imgarea[1] = imgarea[1]/wh[0];\n          } else if(wh[0] < wh[1]){\n            imgarea[0] = imgarea[0]/wh[1];\n            imgarea[1] = imgarea[1]/wh[1];\n          }\n        }\n\n        return [imgarea[0]+'px', imgarea[1]+'px']; \n      }(),\n      title: false,\n      shade: 0.9,\n      shadeClose: true,\n      closeBtn: false,\n      move: '.layer-layer-photos-main img',\n      moveType: 1,\n      scrollbar: false,\n      moveOut: true,\n      anim: 5,\n      isOutAnim: false,\n      skin: 'layui-layer-photos' + skin('photos'),\n      content: '<div class=\"layer-layer-photos-main\">'\n        + '<img src=\"'+ data[start].src +'\" alt=\"'+ alt +'\" layer-pid=\"'+ (data[start].pid || '') +'\">'\n        + function(){\n          var arr = ['<div class=\"layui-layer-photos-pointer\">'];\n\n          // 左右箭头翻页\n          if (data.length > 1) {\n            arr.push(['<div class=\"layer-layer-photos-page\">',\n              '<span class=\"layui-icon layui-icon-left layui-layer-photos-prev\"></span>',\n              '<span class=\"layui-icon layui-icon-right layui-layer-photos-next\"></span>',\n            '</div>'].join(''));\n          }\n\n          // 头部工具栏\n          if (options.toolbar) {\n            arr.push([\n              '<div class=\"layui-layer-photos-toolbar layui-layer-photos-header\">',\n                '<span toolbar-event=\"rotate\" data-option=\"90\" title=\"旋转\"><i class=\"layui-icon layui-icon-refresh\"></i></span>',\n                '<span toolbar-event=\"scalex\" title=\"变换\"><i class=\"layui-icon layui-icon-slider\"></i></span>',\n                '<span toolbar-event=\"zoom\" data-option=\"0.1\" title=\"放大\"><i class=\"layui-icon layui-icon-add-circle\"></i></span>',\n                '<span toolbar-event=\"zoom\" data-option=\"-0.1\" title=\"缩小\"><i class=\"layui-icon layui-icon-reduce-circle\"></i></span>',\n                '<span toolbar-event=\"reset\" title=\"还原\"><i class=\"layui-icon layui-icon-refresh-1\"></i></span>',\n                '<span toolbar-event=\"close\" title=\"关闭\"><i class=\"layui-icon layui-icon-close\"></i></span>',\n              '</div>'\n            ].join(''));\n          }\n\n          // 底部栏\n          if (options.footer) {\n            arr.push(['<div class=\"layui-layer-photos-toolbar layui-layer-photos-footer\">',\n              '<h3>'+ alt +'</h3>',\n              '<em>'+ dict.imgIndex +' / '+ data.length +'</em>',\n              '<a href=\"'+ data[start].src +'\" target=\"_blank\">查看原图</a>',\n            '</div>'].join(''));\n          }\n\n          arr.push('</div>');\n          return arr.join('');\n        }()\n      +'</div>',\n      success: function(layero, index, that){\n        dict.main = layero.find('.layer-layer-photos-main');\n        dict.footer = layero.find('.layui-layer-photos-footer');\n        dict.imgElem = dict.main.children('img');\n        dict.event(layero, index, that);\n        options.tab && options.tab(data[start], layero);\n        typeof success === 'function' && success(layero);\n      }, end: function(){\n        dict.end = true;\n        $(document).off('keyup', dict.keyup);\n      }\n    }, options));\n  }, function(){\n    layer.close(dict.loadi);\n    layer.msg('&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;', {\n      time: 30000, \n      btn: ['&#x4E0B;&#x4E00;&#x5F20;', '&#x4E0D;&#x770B;&#x4E86;'], \n      yes: function(){\n        data.length > 1 && dict.imgnext(true,true);\n      }\n    });\n  });\n};\n\n// 主入口\nready.run = function(_$){\n  $ = _$;\n  win = $(window);\n  \n  // 移动端兼容性处理\n  // https://gitee.com/layui/layui/issues/I81WGC\n  // https://github.com/jquery/jquery/issues/1729\n  var agent = navigator.userAgent.toLowerCase();\n  var isMobile = /android|iphone|ipod|ipad|ios/.test(agent)\n  var _win = $(window);\n  if(isMobile){\n    $.each({Height: \"height\", Width: \"width\"}, function(propSuffix, funcName){\n      var propName = 'inner' + propSuffix;\n      win[funcName] = function(){\n        return propName in window \n          ? window[propName]\n          : _win[funcName]()\n      }\n    })\n  }\n  doms.html = $('html');\n  layer.open = function(deliver){\n    var o = new Class(deliver);\n    return o.index;\n  };\n};\n\n// 加载方式\nwindow.layui && layui.define ? (\n  layer.ready(),\n  layui.define('jquery', function(exports){ // layui\n    layer.path = layui.cache.dir;\n    ready.run(layui.$);\n\n    // export api\n    window.layer = layer;\n    exports('layer', layer);\n  })\n) : (\n  (typeof define === 'function' && define.amd) ? define(['jquery'], function(){ // requirejs\n    ready.run(jQuery);\n    return layer;\n  }) : function(){ // 普通 script 标签引入\n    layer.ready();\n    ready.run(jQuery);\n  }()\n);\n\n\n"],"names":["isLayui","$","win","ready","jsPath","js","last","src","i","GLOBAL","node","name","style","href","fn","cssname","layer","head","link","app","id","STATUS_NAME","timeout","poll","status","delay","getLinkElem","agent","options","callback","ver","path","content","yes","type","cancel","end","rskin","skin","anim","doms","icon","follow","Class","setings","that","creat","conType","times","config","zIndex","titype","ismax","titleHTML","face","additFaceClass","animClass","arr","button","len","className","body","layero","index","elemShade","maxminStatus","html","moveElem","area","titHeight","btnHeight","setHeight","elem","layArea","goal","tipsG","guide","_DOC","DATA_NAME","resizeElem","e","othis","dict","X","Y","fixed","setRig","setBot","close","min","value","sthis","setZindex","selector","heg","url","limit","contElem","shadeo","elemMin","minLeft","hasMinLeft","left","position","minWidth","settings","isfix","title","closest","hideOnClose","closeAnim","remove","WRAP","wrap","iframe","domsElem","_index","is","cache","placeholder","prompt","success","tab","THIS","ii","str","btn","main","loop","key","isObject","photos","data","start","parent","pushData","errorMsg","event","code","n","opts","transforms","rotate","scaleX","scale","ratio","delta","zoomElem","loadImage","error","img","alt","imgarea","winarea","wh","_$","isMobile","_win","propSuffix","funcName","propName","deliver","o","exports","jQuery"],"mappings":"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"}